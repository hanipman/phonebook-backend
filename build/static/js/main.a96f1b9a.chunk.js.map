{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","create","newEntry","post","update","id","updatedEntry","put","deletePerson","delete","Filter","filter","handleFilter","value","onChange","PersonForm","handleAdd","handleNameChange","handleNumberChange","name","number","onSubmit","type","Persons","persons","handleDelete","person","toLowerCase","includes","map","i","onClick","event","Notification","notif","error","className","App","useState","setPersons","setEntry","setFilter","setNotif","setError","refreshList","x","catch","setTimeout","useEffect","target","preventDefault","filtered_list","length","window","confirm","copy","index","findIndex","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a96f1b9a.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newEntry) => {\r\n    const request = axios.post(baseUrl, newEntry)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, updatedEntry) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, updatedEntry)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n} \r\n\r\nconst personService = { getAll, create, update, deletePerson }\r\n\r\nexport default personService;","import React, { useEffect, useState } from 'react'\n\nimport personService from './services/persons.js'\n\nconst Filter = ({ filter, handleFilter }) => {\n\treturn (\n\t\t<form>\n\t\t\tfilter shown with<input value={filter} onChange={handleFilter} />\n\t\t</form>\n\t)\n}\n\nconst PersonForm = ({ handleAdd, handleNameChange, handleNumberChange, name, number }) => {\n\treturn (\n\t\t<form onSubmit={handleAdd}>\n\t\t\t<div>\n\t\t\t\tname: <input value={name} onChange={handleNameChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input value={number} onChange={handleNumberChange} />\n\t\t\t</div>\n\t\t\t<button type=\"submit\" >add</button>\n\t\t</form>\n\t)\n}\n\nconst Persons = ({ persons, filter, handleDelete }) => {\n\treturn (\n\t\t<ul>\n\t\t\t{persons.filter(person => \n\t\t\t\tperson.name.toLowerCase().includes(filter.toLowerCase())).map((person, i) =>\n\t\t\t\t\t<div key={i} >\n\t\t\t\t\t\t<li key={i}> {person.name} {person.number} <button onClick={event => handleDelete(event, person.id, person.name)}>Delete</button></li>\n\t\t\t\t\t</div>\n\t\t\t)}\n\t\t</ul>\n\t)\n}\n\nconst Notification = ({ notif, error }) => {\n\tif (notif === null) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<div className={error ? \"error\" : \"notif\"}>\n\t\t\t{notif}\n\t\t</div>\n\t)\n}\n\nconst App = () => {\n\tconst [ persons, setPersons ] = useState([]) \n\tconst [ newEntry, setEntry ] = useState({\n\t\tname: '',\n\t\tnumber: ''\n\t})\n\tconst [ filter, setFilter ] = useState('')\n\tconst [ notif, setNotif ] = useState(null)\n\tconst [ error, setError ] = useState(false)\n\t\n\tconst refreshList = () => {\n\t\tpersonService.getAll().then(x => setPersons(x))\n\t\t\t.catch(error => {\n\t\t\t\tif (!error.response) {\n\t\t\t\t\tsetNotif('Could not connect to server.')\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetNotif('Failed to get phonebook')\n\t\t\t\t}\n\t\t\t\tsetError(true)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetNotif(null)\n\t\t\t\t\tsetError(false)\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\t// personService.getAll().then(x => setPersons(x))\n\t\t// \t.catch(error => {\n\t\t// \t\tif (!error.response) {\n\t\t// \t\t\tsetNotif('Could not connect to server.')\n\t\t// \t\t}\n\t\t// \t\telse {\n\t\t// \t\t\tsetNotif(`Failed to get phonebook`)\n\t\t// \t\t}\n\t\t// \t\tsetError(true)\n\t\t// \t\tsetTimeout(() => {\n\t\t// \t\t\tsetNotif(null)\n\t\t// \t\t\tsetError(false)\n\t\t// \t\t}, 5000)\n\t\t// \t})\n\t\trefreshList()\n\t}, [])\n\n\tconst handleAdd = (event) => {\n\t\tevent.preventDefault()\n\t\tconst filtered_list = persons.filter(person => person.name === newEntry.name)\n\t\tif (filtered_list.length > 0) {\n\t\t\tif (window.confirm(`${newEntry.name} is already added to phonebook, replace the old number with a new one?`)) {\n\t\t\t\tpersonService.update(filtered_list[0].id, newEntry)\n\t\t\t\t\t.then(x => {\n\t\t\t\t\t\tconst copy = [...persons]\n\t\t\t\t\t\tconst index = copy.findIndex(x => x.id === filtered_list[0].id)\n\t\t\t\t\t\tcopy[index].number = newEntry.number\n\t\t\t\t\t\tsetPersons(copy)\n\t\t\t\t\t\tsetNotif(`Updated ${newEntry.name}`)\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\trefreshList()\n\t\t\t\t\t\tif (!error.response) {\n\t\t\t\t\t\t\tsetNotif('Could not connect to server.')\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsetNotif(error.response.data.error)\n\t\t\t\t\t\t\tsetPersons(persons.filter(person => person.name !== newEntry.name))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetError(true)\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t\t\tsetError(false)\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tpersonService.create(newEntry)\n\t\t\t\t.then(x => {\n\t\t\t\t\tsetPersons(persons.concat({ name: x.name, number: x.number, id: x.id}))\n\t\t\t\t\tsetNotif(`Created entry for ${x.name}`)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\trefreshList()\n\t\t\t\t\tif (!error.response) {\n\t\t\t\t\t\tsetNotif('Could not connect to server.')\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsetNotif(error.response.data.error)\n\t\t\t\t\t}\n\t\t\t\t\tsetError(true)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t\tsetError(false)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst handleFilter = (event) => {\n\t\tsetFilter(event.target.value)\n\t}\n\n\tconst handleNameChange = (event) => {\n\t\tsetEntry({\n\t\t\t...newEntry,\n\t\t\tname: event.target.value\n\t\t})\n\t}\n\n\tconst handleNumberChange = (event) => {\n\t\tsetEntry({\n\t\t\t...newEntry,\n\t\t\tnumber: event.target.value\n\t\t})\n\t}\n\n\tconst handleDelete = (event, id, name) => {\n\t\tevent.preventDefault()\n\t\tif (window.confirm(`Delete ${name}?`)) {\n\t\t\tpersonService.deletePerson(id)\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetPersons(persons.filter(person => person.id !== id))\n\t\t\t\t\tsetNotif(`Deleted ${name}`)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\trefreshList()\n\t\t\t\t\tif (!error.response) {\n\t\t\t\t\t\tsetNotif('Could not connect to server.')\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsetNotif(`Information of ${name} has already been removed from server`)\n\t\t\t\t\t\tsetPersons(persons.filter(person => person.name !== name))\n\t\t\t\t\t}\n\t\t\t\t\tsetError(true)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNotif(null)\n\t\t\t\t\t\tsetError(false)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t  \t<h2>Phonebook</h2>\n\t\t\t<Notification notif={notif} error={error} />\n\t\t\t<Filter filter={filter} handleFilter={handleFilter} />\n\t\t\t<h2>add a new</h2>\n\t\t\t<PersonForm \n\t\t\t\thandleAdd={handleAdd} \n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t\tname={newEntry.name}\n\t\t\t\tnumber={newEntry.number}\n\t\t\t/>\n\t\t  \t<h2>Numbers</h2>\n\t\t\t<Persons persons={persons} filter={filter} handleDelete={handleDelete} />\n\t\t</div>\n\t)\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}